<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Kalendarz pracy Mariusza</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      display: flex;
      justify-content: center;
      padding: 40px;
      flex-direction: column;
      align-items: center;
    }

    @media (max-width: 600px) {
      html, body {
        padding: 0;
        margin: 0;
        width: 100vw;
        min-width: 0;
        box-sizing: border-box;
      }
      .calendar {
        padding: 0;
        border-radius: 0;
        box-shadow: none;
        max-width: 100vw;
        min-width: 0;
        width: 100vw;
      }
      .legend {
        margin-top: 10px;
        padding: 10px 0 10px 0;
        border-radius: 0;
        box-shadow: none;
        font-size: 18px;
        max-width: 100vw;
        width: 100vw;
        text-align: center;
      }
      .header h2 {
        font-size: 22px;
      }
      .dot {
        width: 44px;
        height: 44px;
        font-size: 22px;
      }
      .flags button {
        font-size: 34px;
      }
      table {
        font-size: 18px;
        width: 100vw;
        min-width: 0;
        table-layout: fixed;
      }
      th, td {
        padding: 8px 0 8px 0;
        min-width: 0;
      }
      td {
        height: 60px;
        min-width: 0;
        font-size: 18px;
        position: relative;
      }
      .day-number {
        top: 6px;
        right: 8px;
        font-size: 18px;
      }
      .legend-item {
        font-size: 18px;
        justify-content: center;
      }
      .color-box {
        width: 22px;
        height: 22px;
      }
    }
    .calendar {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 600px;
    }
    .system-switch {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 10px;
      gap: 10px;
      flex-wrap: wrap;
    }
    .dot {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      font-weight: bold;
      font-size: 16px;
      color: white;
    }
    .dot.yellow.active { background-color: #fdd835; }
    .dot.yellow.inactive { background-color: #fff9c4; }
    .dot.green.active { background-color: #43a047; }
    .dot.green.inactive { background-color: #c8e6c9; }
    .dot.blue.active { background-color: #2196f3; }
    .dot.blue.inactive { background-color: #bbdefb; }
    .dot.red.active { background-color: #f44336; }
    .dot.red.inactive { background-color: #ef9a9a; }
    .flags {
      text-align: center;
      margin-bottom: 10px;
    }
    .flags button {
      font-size: 24px;
      margin: 0 5px;
      cursor: pointer;
      background: none;
      border: none;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .header button {
      background: #4caf50;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    .header h2 {
      margin: 0;
      font-size: 24px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th {
      background: #4caf50;
      color: white;
      padding: 10px;
    }
    td {
      width: 14.28%;
      height: 80px;
      vertical-align: top;
      border: 1px solid #ddd;
      padding: 5px;
      position: relative;
    }
    .today {
      outline: 2px solid #4caf50;
    }
    .day-number {
      position: absolute;
      top: 5px;
      right: 5px;
      font-weight: bold;
    }
    .legend {
      margin-top: 20px;
      font-size: 14px;
      background: white;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      max-width: 600px;
      width: 100%;
    }
    .legend-item {
      display: flex;
      align-items: center;
      margin-bottom: 5px;
    }
    .color-box {
      width: 20px;
      height: 20px;
      margin-right: 10px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <div class="calendar">
    <div class="system-switch">
      <button id="dotA" class="dot blue inactive"
onclick="setShiftSystem('A')">A</button>
      <button id="dotB" class="dot red inactive"
onclick="setShiftSystem('B')">B</button>
      <button id="dotC" class="dot green inactive"
onclick="setShiftSystem('alt')">C</button>
      <button id="dotD" class="dot yellow active"
onclick="setShiftSystem('default')">D</button>
    </div>
    <div class="flags">
      <button
onclick="setLanguage('pl')">üáµüá±</button>
      <button
onclick="setLanguage('ru')">üá∑üá∫</button>
      <button
onclick="setLanguage('de')">üá©üá™</button>
    </div>
    <div class="header">
      <button onclick="changeMonth(-1)">‚Üê</button>
      <h2 id="monthYear"></h2>
      <button onclick="changeMonth(1)">‚Üí</button>
    </div>
    <table>
      <thead>
        <tr>
         
<th>Pn</th><th>Wt</th><th>≈ör</th><th>Cz</th><th>Pt</th><th>Sb</th><th>Nd</th>
        </tr>
      </thead>
      <tbody id="calendarBody"></tbody>
    </table>
  </div>

  <div class="legend">
    <div class="legend-item"><div
class="color-box"
style="background:#bbdefb;"></div> Rano
‚òÄÔ∏è</div>
    <div class="legend-item"><div
class="color-box"
style="background:#c8e6c9;"></div> Po≈Çudnie
üå§Ô∏è</div>
    <div class="legend-item"><div
class="color-box"
style="background:#ffcdd2;"></div> Nocka
üåô</div>
    <div class="legend-item"><div
class="color-box"
style="background:#ffe0b2;"></div> ≈öwiƒôto
üéâ</div>
  </div>

  <script>
    const monthYear = document.getElementById("monthYear");
    const calendarBody = document.getElementById("calendarBody");
    let currentDate = new Date();
    let currentLang = "pl";
    let shiftSystem = "default";

    const systemCycles = {
      default: {
        start: new Date(Date.UTC(2025, 0, 3)),
        cycle:
["Rano","Rano","Rano","Rano","Rano","Wolne","Wolne","Nocka","Nocka","Nocka","Nocka","Nocka","Wolne","Wolne","Po≈Çudnie","Po≈Çudnie","Po≈Çudnie","Po≈Çudnie","Po≈Çudnie","Wolne"]
      },
      alt: {
        start: new Date(Date.UTC(2025, 0, 2)),
        cycle:
["Po≈Çudnie","Po≈Çudnie","Po≈Çudnie","Po≈Çudnie","Po≈Çudnie","Wolne","Rano","Rano","Rano","Rano","Rano","Wolne","Wolne","Nocka","Nocka","Nocka","Nocka","Nocka","Wolne","Wolne"]
      },
      A: {
        start: new Date(Date.UTC(2025, 0, 5)),
        cycle:
["Nocka","Nocka","Nocka","Nocka","Nocka","Wolne","Wolne","Po≈Çudnie","Po≈Çudnie","Po≈Çudnie","Po≈Çudnie","Po≈Çudnie","Wolne","Rano","Rano","Rano","Rano","Rano","Wolne","Wolne"]
      },
      B: {
        start: new Date(Date.UTC(2025, 0, 7)),
        cycle:
["Po≈Çudnie","Po≈Çudnie","Po≈Çudnie","Po≈Çudnie","Po≈Çudnie","Wolne","Rano","Rano","Rano","Rano","Rano","Wolne","Wolne","Nocka","Nocka","Nocka","Nocka","Nocka","Wolne","Wolne"]
      }
    };

    const translations = {
      pl: {
        days: ["Pn", "Wt", "≈ör",
"Cz", "Pt", "Sb", "Nd"],
        locale: "pl-PL",
        legend: {
          morning: "Rano ‚òÄÔ∏è",
          afternoon: "Po≈Çudnie üå§Ô∏è",
          night: "Nocka üåô",
          holiday: "≈öwiƒôto üéâ"
        }
      },
      ru: {
        days: ["–ü–Ω", "–í—Ç", "–°—Ä",
"–ß—Ç", "–ü—Ç", "–°–±", "–í—Å"],
        locale: "ru-RU",
        legend: {
          morning: "–£—Ç—Ä–æ ‚òÄÔ∏è",
          afternoon: "–î–µ–Ω—å üå§Ô∏è",
          night: "–ù–æ—á—å üåô",
          holiday: "–ü—Ä–∞–∑–¥–Ω–∏–∫ üéâ"
        }
      },
      de: {
        days: ["Mo", "Di", "Mi",
"Do", "Fr", "Sa", "So"],
        locale: "de-DE",
        legend: {
          morning: "Morgen ‚òÄÔ∏è",
          afternoon: "Nachmittag üå§Ô∏è",
          night: "Nacht üåô",
          holiday: "Feiertag üéâ"
        }
      }
    };

    function getEasterDate(year) {
      const f = Math.floor,
            G = year % 19,
            C = f(year / 100),
            H = (C - f(C / 4) - f((8 * C + 13) / 25) + 19 * G + 15) % 30,
            I = H - f(H / 28) * (1 - f(29 / (H + 1)) * f((21 - G) / 11)),
            J = (year + f(year / 4) + I + 2 - C + f(C / 4)) % 7,
            L = I - J,
            month = 3 + f((L + 40) / 44),
            day = L + 28 - 31 * f(month / 4);
      return new Date(year, month - 1, day);
    }

    function formatDate(date) {
      const y = date.getFullYear();
      const m = String(date.getMonth() + 1).padStart(2, '0');
      const d = String(date.getDate()).padStart(2, '0');
      return `${y}-${m}-${d}`;
    }

    function getHolidaysNRW(year) {
      const holidays = [
        `${year}-01-01`, `${year}-05-01`, `${year}-10-03`,
        `${year}-11-01`, `${year}-12-25`, `${year}-12-26`
      ];
      const easter = getEasterDate(year);
      const offsets = [-2, 1, 39, 49, 50, 60];
      offsets.forEach(offset => {
        const d = new Date(easter);
        d.setDate(easter.getDate() + offset);
        holidays.push(formatDate(d));
      });
      return holidays;
    }

    function getShiftType(date) {
      const system = systemCycles[shiftSystem];
      const currentUTC = Date.UTC(date.getFullYear(), date.getMonth(),
date.getDate());
      const dayDiff = Math.floor((currentUTC - system.start.getTime()) /
(1000 * 60 * 60 * 24));
      const index = ((dayDiff % system.cycle.length) + system.cycle.length)
% system.cycle.length;
      return system.cycle[index];
    }

    function renderCalendar(date) {
      const year = date.getFullYear();
      const month = date.getMonth();
      const today = new Date();
      const holidaysNRW = getHolidaysNRW(year);

      monthYear.textContent =
date.toLocaleString(translations[currentLang].locale, {
        month: "long",
        year: "numeric"
      });

      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      const startOffset = (firstDay === 0) ? 6 : firstDay - 1;

      calendarBody.innerHTML = "";

      const headers = document.querySelectorAll("thead th");
      translations[currentLang].days.forEach((day, i) => {
        headers[i].textContent = day;
      });

      let row = document.createElement("tr");
      for (let i = 0; i < startOffset; i++) {
        row.appendChild(document.createElement("td"));
      }

      for (let day = 1; day <= daysInMonth; day++) {
        const cell = document.createElement("td");
        const isToday = day === today.getDate() &&
                        month === today.getMonth() &&
                        year === today.getFullYear();

        if (isToday) cell.classList.add("today");

        const number = document.createElement("div");
        number.className = "day-number";
        number.textContent = day;
        cell.appendChild(number);

        const shiftType = getShiftType(new Date(year, month, day));
        const dateStr = formatDate(new Date(year, month, day));

        if (holidaysNRW.includes(dateStr)) {
          cell.style.backgroundColor = "#ffe0b2";
          cell.title = translations[currentLang].legend.holiday;
        } else {
          if (shiftType === "Rano") {
            cell.style.backgroundColor = "#bbdefb";
            cell.title = translations[currentLang].legend.morning;
          } else if (shiftType === "Po≈Çudnie") {
            cell.style.backgroundColor = "#c8e6c9";
            cell.title = translations[currentLang].legend.afternoon;
          } else if (shiftType === "Nocka") {
            cell.style.backgroundColor = "#ffcdd2";
            cell.title = translations[currentLang].legend.night;
          }
        }

        row.appendChild(cell);

        if ((startOffset + day) % 7 === 0 || day === daysInMonth) {
          calendarBody.appendChild(row);
          row = document.createElement("tr");
        }
      }

      if (row.children.length > 0) {
        calendarBody.appendChild(row);
      }
    }

    function changeMonth(offset) {
      currentDate.setMonth(currentDate.getMonth() + offset);
      renderCalendar(currentDate);
    }

    function setShiftSystem(system) {
      shiftSystem = system;

      const dots = {
        default: document.getElementById("dotD"),
        alt: document.getElementById("dotC"),
        A: document.getElementById("dotA"),
        B: document.getElementById("dotB")
      };

      for (const key in dots) {
        dots[key].classList.remove("active",
"inactive");
        dots[key].classList.add(key === system ? "active" :
"inactive");
      }

      renderCalendar(currentDate);
      updateLegend();
    }

    function setLanguage(lang) {
      currentLang = lang;
      renderCalendar(currentDate);
      updateLegend();
    }

    function updateLegend() {
      const legendItems =
document.querySelectorAll(".legend-item");
      const legendTexts = translations[currentLang].legend;

      legendItems[0].lastChild.textContent = legendTexts.morning;
      legendItems[1].lastChild.textContent = legendTexts.afternoon;
      legendItems[2].lastChild.textContent = legendTexts.night;
      legendItems[3].lastChild.textContent = legendTexts.holiday;
    }

    // Inicjalizacja
    renderCalendar(currentDate);
    updateLegend();
  </script>
</body>
</html>
