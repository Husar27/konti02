<!DOCTYPE html>
<html lang="pl" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,
initial-scale=1.0" />
  <title>Profil u≈ºytkownika</title>
  <style>
            .floating-btn {
                  position: fixed;
                  z-index: 1000;
                  background: rgba(255,255,255,0.7);
                  border: none;
                  box-shadow: 0 2px 8px 0 rgba(0,0,0,0.10);
                  border-radius: 50%;
                  padding: 8px;
                  cursor: pointer;
                  transition: background 0.2s, box-shadow 0.2s;
                  color: #222;
                  outline: none;
                  backdrop-filter: blur(2px);
            }
            .floating-btn svg {
                  display: block;
                  width: 32px;
                  height: 32px;
                  stroke: #222;
                  opacity: 0.85;
            }
            .floating-btn:hover {
                  background: rgba(76,175,80,0.12);
                  box-shadow: 0 4px 16px 0 rgba(76,175,80,0.18);
            }
            .back-btn {
                  top: 24px;
                  right: 24px;
            }
                        @media (max-width: 600px) {
                              .back-btn {
                                    top: 44px;
                                    right: 44px;
                                    left: unset;
                                    bottom: unset;
                              }
                              .floating-btn svg {
                                    width: 28px;
                                    height: 28px;
                              }
                        }
    :root {
      --bg-light: #f0f0f0;
      --text-light: #333;
      --bg-dark: #1e1e1e;
      --text-dark: #f0f0f0;
    }

    [data-theme="light"] {
      background-color: var(--bg-light);
      color: var(--text-light);
    }

    [data-theme="dark"] {
      background-color: var(--bg-dark);
      color: var(--text-dark);
    }

    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 2rem;
      transition: background-color 0.3s, color 0.3s;
    }

    .profile-container {
      max-width: 500px;
      margin: auto;
      padding: 2rem;
      border-radius: 10px;
      background-color: inherit;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .theme-toggle .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 30px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      background-color: #ccc;
      border-radius: 30px;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: space-around;
      font-size: 18px;
    }

    .profile-form button {
      display: block;
      width: 100%;
      margin: 0.5rem 0;
      padding: 0.7rem;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }

    .panel {
      display: none;
      margin-top: 1rem;
      padding: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      background-color: rgba(0,0,0,0.03);
    }

    input, textarea, select {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.3rem;
      border-radius: 5px;
      border: 1px solid #ccc;
      margin-bottom: 1rem;
    }

    .vacation-info, .birthday-list {
      font-style: italic;
      margin-top: 0.5rem;
    }

    .birthday-entry {
      margin-top: 0.3rem;
    }

            /* Wszystkie przyciski na zielono, Wyloguj siƒô na szaro */
            #saveEmailBtn, #saveLanguageBtn,
            #toggleEmailPanel, #toggleVacationPanel, #toggleBirthdayPanel,
            #togglePasswordPanel, #toggleLanguagePanel,
            #saveVacationBtn, #addBirthdayBtn, #changePasswordBtn,
            #cancelVacationBtn {
                  background-color: #4CAF50;
                  color: white;
            }
            #logoutBtn {
                  background-color: #757575;
                  color: white;
            }
  </style>
</head>
<body>
                  <script>
                        // Sprawd≈∫ czy u≈ºytkownik jest zalogowany
                        if (!sessionStorage.getItem("login")) {
                              window.location.href = "index.html";
                        }
                  </script>
                  <button id="backBtn" title="Powr√≥t do kalendarza" class="floating-btn back-btn" aria-label="Powr√≥t do kalendarza">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="4" y="5" width="16" height="15" rx="3"/>
                  <line x1="8" y1="3" x2="8" y2="7"/>
                  <line x1="16" y1="3" x2="16" y2="7"/>
                  <line x1="4" y1="10" x2="20" y2="10"/>
            </svg>
      </button>
      <div class="profile-container">
            <header>
                  <h2 id="usernameLabel">Witaj, <span id="username">Mariusz</span></h2>
                  <div class="theme-toggle">
                        <label class="switch">
                              <input type="checkbox" id="themeSwitch"/>
                              <span class="slider">üåû<span class="moon">üåô</span></span>
                        </label>
                  </div>
            </header>

    <section class="profile-form">
      <button id="toggleLanguagePanel">Zmie≈Ñ
jƒôzyk</button>
      <div id="languagePanel" class="panel">
        <label id="labelLanguage"
for="languageSelect">Wybierz jƒôzyk:</label>
        <select id="languageSelect">
          <option value="pl">Polski üáµüá±</option>
          <option value="de">Deutsch
üá©üá™</option>
          <option value="ru">–†—É—Å—Å–∫–∏–π
üá∑üá∫</option>
        </select>
        <button id="saveLanguageBtn">Zapisz
jƒôzyk</button>
      </div>

      <button id="toggleEmailPanel">Zmie≈Ñ
email</button>
      <div id="emailPanel" class="panel">
        <label id="labelEmail">Email:</label>
        <input type="email" id="email"
placeholder="Tw√≥j adres email" />
        <button id="saveEmailBtn">Zapisz
email</button>
      </div>

      <button id="toggleVacationPanel">ZarzƒÖdzaj
urlopem</button>
      <div id="vacationPanel" class="panel">
        <label id="labelVacationStart">Od:</label>
        <input type="date" id="vacationStart" />
        <label id="labelVacationEnd">Do:</label>
        <input type="date" id="vacationEnd" />
        <button id="saveVacationBtn">Zapisz
urlop</button>
        <button id="cancelVacationBtn"
style="display:none;">Anuluj urlop</button>
        <div class="vacation-info"
id="vacationInfo"></div>
      </div>

      <button id="toggleBirthdayPanel">ZarzƒÖdzaj
urodzinami</button>
      <div id="birthdayPanel" class="panel">
        <label id="labelFriendName">Imiƒô:</label>
        <input type="text" id="friendName"
placeholder="Imiƒô znajomego" />
        <label id="labelFriendBirthday">Data
urodzin:</label>
        <input type="date" id="friendBirthday" />
        <button id="addBirthdayBtn">Dodaj
urodziny</button>
        <div class="birthday-list"
id="birthdayList"></div>
      </div>

      <button id="togglePasswordPanel">Zmie≈Ñ
has≈Ço</button>
      <div id="passwordPanel" class="panel">
        <label id="labelOldPassword">Stare
has≈Ço:</label>
        <input type="password" id="oldPassword"
/>
        <label id="labelNewPassword">Nowe
has≈Ço:</label>
        <input type="password" id="newPassword"
/>
        <button id="changePasswordBtn">Zapisz nowe
has≈Ço</button>
      </div>

      <button id="logoutBtn">Wyloguj siƒô</button>
    </section>
  </div>

  <script>
            // Nawigacja: powr√≥t do kalendarza i wylogowanie
            document.getElementById("backBtn").addEventListener("click", function() {
                  window.location.href = "calendar.html";
            });
            // Wylogowanie: czy≈õci dane u≈ºytkownika i przekierowuje do index.html
            document.getElementById("logoutBtn").addEventListener("click", function() {
                  // Usu≈Ñ dane u≈ºytkownika z localStorage i sessionStorage
                  localStorage.removeItem("userTheme");
                  localStorage.removeItem("userLanguage");
                  localStorage.removeItem("userEmail");
                  localStorage.removeItem("userVacation");
                  localStorage.removeItem("userBirthdays");
                  sessionStorage.removeItem("login");
                  sessionStorage.removeItem("guest");
                  window.location.href = "index.html";
            });
    const html = document.documentElement;
    const themeSwitch = document.getElementById("themeSwitch");

    themeSwitch.addEventListener("change", () => {
      const theme = themeSwitch.checked ? "dark" :
"light";
      html.setAttribute("data-theme", theme);
      localStorage.setItem("userTheme", theme);
    });

    window.addEventListener("DOMContentLoaded", () => {
      const savedTheme = localStorage.getItem("userTheme") || "light";
      html.setAttribute("data-theme", savedTheme);
      themeSwitch.checked = savedTheme === "dark";

      // Pobierz jƒôzyk z localStorage lub sessionStorage, domy≈õlnie pl
      let lang = localStorage.getItem("userLanguage") || sessionStorage.getItem("userLanguage") || "pl";
      document.getElementById("languageSelect").value = lang;
      applyLanguage(lang);

      const vacation = JSON.parse(localStorage.getItem("userVacation"));
      if (vacation) {
        document.getElementById("vacationInfo").textContent = `Tw√≥j urlop: ${vacation.start} ‚Üí ${vacation.end}`;
        document.getElementById("cancelVacationBtn").style.display = "inline-block";
      }

      const birthdays = JSON.parse(localStorage.getItem("userBirthdays")) || [];
      updateBirthdayList(birthdays);
    });

    function togglePanel(id) {
      const panel = document.getElementById(id);
      panel.style.display = panel.style.display === "none" ?
"block" : "none";
    }

   
document.getElementById("toggleLanguagePanel").addEventListener("click",
() => togglePanel("languagePanel"));
   
document.getElementById("toggleEmailPanel").addEventListener("click",
() => togglePanel("emailPanel"));
   
document.getElementById("toggleVacationPanel").addEventListener("click",
() => togglePanel("vacationPanel"));
   
document.getElementById("toggleBirthdayPanel").addEventListener("click",
() => togglePanel("birthdayPanel"));
   
document.getElementById("togglePasswordPanel").addEventListener("click",
() => togglePanel("passwordPanel"));

   
document.getElementById("saveEmailBtn").addEventListener("click",
() => {
      const email = document.getElementById("email").value;
      if (!email) return alert("Wprowad≈∫ adres email.");
      localStorage.setItem("userEmail", email);
      alert("Email zapisany.");
      document.getElementById("emailPanel").style.display =
"none";
    });

   
document.getElementById("saveVacationBtn").addEventListener("click",
() => {
      const start = document.getElementById("vacationStart").value;
      const end = document.getElementById("vacationEnd").value;
      if (!start || !end || start > end) return alert("Wprowad≈∫ poprawny zakres dat.");
      const vacation = { start, end };
      localStorage.setItem("userVacation",
JSON.stringify(vacation));
      document.getElementById("vacationInfo").textContent =
`Tw√≥j urlop: ${start} ‚Üí ${end}`;
      document.getElementById("cancelVacationBtn").style.display
= "inline-block";
      alert("Urlop zapisany.");
    });

   
document.getElementById("cancelVacationBtn").addEventListener("click",
() => {
      localStorage.removeItem("userVacation");
      document.getElementById("vacationInfo").textContent =
"";
      document.getElementById("cancelVacationBtn").style.display
= "none";
      alert("Urlop anulowany.");
    });

   
document.getElementById("addBirthdayBtn").addEventListener("click",
() => {
      const name = document.getElementById("friendName").value.trim();
      const date = document.getElementById("friendBirthday").value;
      if (!name || !date) return alert("Wprowad≈∫ imiƒô i datƒô urodzin.");
      const birthdays = JSON.parse(localStorage.getItem("userBirthdays")) || [];
      birthdays.push({ name, date });
      localStorage.setItem("userBirthdays",
JSON.stringify(birthdays));
      updateBirthdayList(birthdays);
      document.getElementById("friendName").value = "";
      document.getElementById("friendBirthday").value =
"";
      alert("Urodziny dodane.");
    });

    function updateBirthdayList(birthdays) {
      const list = document.getElementById("birthdayList");
      list.innerHTML = "";
      birthdays.forEach((entry) => {
        const div = document.createElement("div");
        div.className = "birthday-entry";
        div.textContent = `${entry.name} ‚Äì ${entry.date}`;
        list.appendChild(div);
      });
    }

   
document.getElementById("changePasswordBtn").addEventListener("click",
() => {
      const oldPass = document.getElementById("oldPassword").value;
      const newPass = document.getElementById("newPassword").value;
      if (!oldPass || !newPass) return alert("Wprowad≈∫ oba has≈Ça.");
      alert("Has≈Ço zosta≈Ço zmienione.");
      document.getElementById("oldPassword").value = "";
      document.getElementById("newPassword").value = "";
      document.getElementById("passwordPanel").style.display = "none";
    });

   
document.getElementById("saveLanguageBtn").addEventListener("click",
() => {
      const lang =
document.getElementById("languageSelect").value;
      localStorage.setItem("userLanguage", lang);
      applyLanguage(lang);
      alert("Jƒôzyk zapisany.");
      document.getElementById("languagePanel").style.display =
"none";
    });

            function applyLanguage(lang) {
                  const t = {
                        pl: {
                              usernameLabel: "Witaj,",
          toggleEmailPanel: "Zmie≈Ñ email",
          toggleVacationPanel: "ZarzƒÖdzaj urlopem",
          toggleBirthdayPanel: "ZarzƒÖdzaj urodzinami",
          togglePasswordPanel: "Zmie≈Ñ has≈Ço",
          toggleLanguagePanel: "Zmie≈Ñ jƒôzyk",
          logoutBtn: "Wyloguj siƒô",
          saveEmailBtn: "Zapisz email",
          saveVacationBtn: "Zapisz urlop",
          cancelVacationBtn: "Anuluj urlop",
          addBirthdayBtn: "Dodaj urodziny",
          changePasswordBtn: "Zapisz nowe has≈Ço",
          saveLanguageBtn: "Zapisz jƒôzyk",
          labelLanguage: "Wybierz jƒôzyk:",
          labelEmail: "Email:",
          labelVacationStart: "Od:",
          labelVacationEnd: "Do:",
          labelFriendName: "Imiƒô:",
          labelFriendBirthday: "Data urodzin:",
          labelOldPassword: "Stare has≈Ço:",
          labelNewPassword: "Nowe has≈Ço:"
        },
        de: {
          usernameLabel: "Willkommen,",
          toggleEmailPanel: "E-Mail √§ndern",
          toggleVacationPanel: "Urlaub verwalten",
          toggleBirthdayPanel: "Geburtstage verwalten",
          togglePasswordPanel: "Passwort √§ndern",
          toggleLanguagePanel: "Sprache √§ndern",
          logoutBtn: "Abmelden",
          saveEmailBtn: "E-Mail speichern",
          saveVacationBtn: "Urlaub speichern",
          cancelVacationBtn: "Urlaub l√∂schen",
          addBirthdayBtn: "Geburtstag hinzuf√ºgen",
          changePasswordBtn: "Passwort speichern",
          saveLanguageBtn: "Sprache speichern",
          labelLanguage: "Sprache w√§hlen:",
          labelEmail: "E-Mail:",
          labelVacationStart: "Von:",
          labelVacationEnd: "Bis:",
          labelFriendName: "Name:",
          labelFriendBirthday: "Geburtstag:",
          labelOldPassword: "Altes Passwort:",
          labelNewPassword: "Neues Passwort:"
        },
        ru: {
          usernameLabel: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å,",
          toggleEmailPanel: "–ò–∑–º–µ–Ω–∏—Ç—å email",
          toggleVacationPanel: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—É—Å–∫–æ–º",
          toggleBirthdayPanel: "–î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è –¥—Ä—É–∑–µ–π",
          togglePasswordPanel: "–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å",
          toggleLanguagePanel: "–ò–∑–º–µ–Ω–∏—Ç—å —è–∑—ã–∫",
          logoutBtn: "–í—ã–π—Ç–∏",
          saveEmailBtn: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å email",
          saveVacationBtn: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–ø—É—Å–∫",
          cancelVacationBtn: "–£–¥–∞–ª–∏—Ç—å –æ—Ç–ø—É—Å–∫",
          addBirthdayBtn: "–î–æ–±–∞–≤–∏—Ç—å –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è",
          changePasswordBtn: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å",
          saveLanguageBtn: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —è–∑—ã–∫",
          labelLanguage: "–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫:",
          labelEmail: "Email:",
          labelVacationStart: "–°:",
          labelVacationEnd: "–ü–æ:",
          labelFriendName: "–ò–º—è:",
          labelFriendBirthday: "–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:",
          labelOldPassword: "–°—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å:",
          labelNewPassword: "–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å:"
        }
      };

      const tr = t[lang];
      // Pobierz login z sessionStorage
      const login = sessionStorage.getItem("login") || "";
      document.getElementById("usernameLabel").innerText = `${tr.usernameLabel} ${login}`;
      document.getElementById("toggleEmailPanel").innerText =
tr.toggleEmailPanel;
      document.getElementById("toggleVacationPanel").innerText =
tr.toggleVacationPanel;
      document.getElementById("toggleBirthdayPanel").innerText =
tr.toggleBirthdayPanel;
      document.getElementById("togglePasswordPanel").innerText =
tr.togglePasswordPanel;
      document.getElementById("toggleLanguagePanel").innerText =
tr.toggleLanguagePanel;
      document.getElementById("logoutBtn").innerText =
tr.logoutBtn;
      document.getElementById("saveEmailBtn").innerText =
tr.saveEmailBtn;
      document.getElementById("saveVacationBtn").innerText =
tr.saveVacationBtn;
      document.getElementById("cancelVacationBtn").innerText =
tr.cancelVacationBtn;
      document.getElementById("addBirthdayBtn").innerText =
tr.addBirthdayBtn;
      document.getElementById("changePasswordBtn").innerText =
tr.changePasswordBtn;
      document.getElementById("saveLanguageBtn").innerText =
tr.saveLanguageBtn;
      document.getElementById("labelLanguage").innerText =
tr.labelLanguage;
      document.getElementById("labelEmail").innerText =
tr.labelEmail;
      document.getElementById("labelVacationStart").innerText =
tr.labelVacationStart;
      document.getElementById("labelVacationEnd").innerText =
tr.labelVacationEnd;
      document.getElementById("labelFriendName").innerText =
tr.labelFriendName;
      document.getElementById("labelFriendBirthday").innerText =
tr.labelFriendBirthday;
      document.getElementById("labelOldPassword").innerText =
tr.labelOldPassword;
      document.getElementById("labelNewPassword").innerText =
tr.labelNewPassword;
    }
  </script>
</body>
</html>
